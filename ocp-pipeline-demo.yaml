apiVersion: v1
items:
    -
        kind: BuildConfig
        apiVersion: v1
        metadata:
            name: pipeline-demo
        spec:
            triggers: [{github: {secret: 5Mlic4Le}, type: GitHub}, {generic: {secret: FiArdDBH}, type: Generic}]
            strategy: {type: JenkinsPipeline, jenkinsPipelineStrategy: {jenkinsfile: "node {\nstage (\"Build\")\n          echo '*** Build Starting ***'\n          openshiftBuild bldCfg: 'cotd2', buildName: '', checkForTriggeredDeployments: 'false', commitID: '', namespace: '', showBuildLogs: 'true', verbose: 'true'\n          openshiftVerifyBuild bldCfg: 'cotd2', checkForTriggeredDeployments: 'false', namespace: '', verbose: 'false'\n          echo '*** Build Complete ***'\n    stage (\"Deploy and Verify in Development Env\")\n          echo '*** Deployment Starting ***'\n          openshiftDeploy depCfg: 'cotd2', namespace: '', verbose: 'false', waitTime: ''\n          openshiftVerifyDeployment authToken: '', depCfg: 'cotd2', namespace: '', replicaCount: '1', verbose: 'false', verifyReplicaCount: 'false', waitTime: ''\n          echo '*** Deployment Complete ***'\n     openshiftVerifyService apiURL:'https://openshift.default.svc.cluster.local', authToken:'', namespace:'honda-dev', svcName:'cotd2', verbose:'false'\n     echo '*** Service Verification Complete ***'\n     openshiftTag(srcStream:'cotd2', srcTag:'latest', destStream:'cotd2', destTag:'testready')\n     stage ('Deploy and Test in Testing Env')\n     echo '*** Deploy testready build in honda-test project  ***'\n     openshiftDeploy apiURL:'https://openshift.default.svc.cluster.local', authToken:'', depCfg:'cotd2', namespace:'honda-test', verbose:'false', waitTime:''\n     openshiftVerifyDeployment apiURL:'https://openshift.default.svc.cluster.local', authToken:'', depCfg:'cotd2', namespace:'honda-test', replicaCount:'1', verbose:'false', verifyReplicaCount:'false', waitTime:'10'\n     sh 'curl http://cotd2-honda-test.apps.na311.openshift.opentlc.com/data/ | grep cats -q'\n     stage ('Promote and Verify in Production Env')\n     echo '*** Waiting for Input ***'\n     input 'Should we deploy to Production?'\n     openshiftTag(srcStream:'cotd2', srcTag:'testready', destStream:'cotd2', destTag:'prodready')\n     echo '*** Deploying to Production ***'\n     openshiftDeploy apiURL:'https://openshift.default.svc.cluster.local', authToken:'', depCfg:'cotd2', namespace:'honda-prod', verbose:'false', waitTime:''\n     openshiftVerifyDeployment apiURL:'https://openshift.default.svc.cluster.local', authToken:'', depCfg:'cotd2', namespace:'honda-prod', replicaCount:'1', verbose:'false', verifyReplicaCount:'false', waitTime:'10'\n     sleep 10\n     sh 'curl http://cotd2-honda-prod.apps.na311.openshift.opentlc.com/data/ | grep cats -q'\n    \n}\n"}}
kind: List
metadata: {}
